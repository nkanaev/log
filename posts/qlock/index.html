<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>It&#39;s quine o&#39;clock | nkanaev</title>
    <link rel="stylesheet" href="/theme/main.css">
    <link rel="icon" href="/theme/favicon.ico" type="image/x-icon">
</head>
<body>
<div class="wrapper">
    <header class="sidebar">
        <a href="/">
            <img src="/theme/avatar.jpg" class="avatar">
            256 shades of grey
        </a>
    </header>
    <div class="content">
        <article>
            
                <h1>It&#39;s quine o&#39;clock</h1>
            
            <p>I&rsquo;ve recently stumbled upon <a href="http://aem1k.com/qlock/">a javascript quine clock</a>.
I had some spare time, which I&rsquo;ve put into a <a href="qlock.py">similar code</a> in Python:</p>
<pre><code>import re;exec(q:=re.sub(chr(27)+'...','','''import time;((
r:=&quot;import re;exec(q:=re.sub(chr(27)+'...','',%s%s%s))&quot; % (
chr(39)*3,q,chr(39)*3))and [(t:=time.strftime('%I:%M:%S') )
and((x:=z%60)or 1)  and((y:=z//60)or 1)  and((c:=r[x+y*60])
or 1)and print(f'{chr(27)}[7m{c}{chr(27)}[0m' if((( x%7!=1)
and 0 &lt;x&lt;57 and y&gt;  1)and(int(('ODREG4'  'MW7O2VELPO27OGFE'
'G7OHBO33SW')[(ord(t[(x-2)//7])-48)*3:][:3],36)&amp;(1&lt;&lt;((y-2)*
3+((x-2)%7)//2))))else c,end='')for z in range(9*60-1)] and
print('')); # Even a broken code is quine twice a day.'''))
</code></pre>
<p>It should work with Python 3.8 onwards, which outputs something similar to this:</p>
<p><img src="preview.png" alt="code preview"></p>
<p>The above code runs, but it doesn&rsquo;t run (as clocks should do).
So here&rsquo;s an animated <a href="iqlock.py">version</a> that may make you tick:</p>
<pre><code>import re;exec(q:=re.sub(chr(27)+'...','','''import time;((
r:=&quot;import re;exec(q:=re.sub(chr(27)+'...','',%s%s%s))&quot;%((S
:=chr(39)*3),q,S))and[(E:=chr(27))and(print(f'{E}[2J{E}[H',
end=''))or[(t:=time.strftime('%I:%M:%S'))and((x:=z%60) | 1)
and((y:=z//60)|1)and(c:=r[x+y*60])and print(end=( f'{E}[7m'
f'{c}{E}[0m')if(x%7!=1 and 0&lt;x&lt;57 and y&gt;1 and(int(('ODREG4'
'MW7O2VELPO27OGFEG7OHBO33SW')[(ord(t[(x-2)//7])-48)*3:][:3]
,36)&amp;(1&lt;&lt;((y-2)*3+((x-2)%7)//2))))else c)for z in range(539
)]and(print()or time.sleep(1))for _ in iter(int,1)]) #'''))
</code></pre>

        </article>

        

        
        <footer class="light">01 Jun 2024</footer>
        
    </div>
</div>
</body>
</html>
