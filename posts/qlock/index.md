---
name: It's quine o'clock
date: 2024-06-01
tags: code, python
---

I've recently stumbled upon [a javascript quine clock](http://aem1k.com/qlock/).
I had some spare time, which I've put into a [similar code](qlock.py) in Python:

    import re;exec(q:=re.sub(chr(27)+'...','','''import time;((
    r:="import re;exec(q:=re.sub(chr(27)+'...','',%s%s%s))" % (
    chr(39)*3,q,chr(39)*3))and [(t:=time.strftime('%I:%M:%S') )
    and((x:=z%60)or 1)  and((y:=z//60)or 1)  and((c:=r[x+y*60])
    or 1)and print(f'{chr(27)}[7m{c}{chr(27)}[0m' if((( x%7!=1)
    and 0 <x<57 and y>  1)and(int(('ODREG4'  'MW7O2VELPO27OGFE'
    'G7OHBO33SW')[(ord(t[(x-2)//7])-48)*3:][:3],36)&(1<<((y-2)*
    3+((x-2)%7)//2))))else c,end='')for z in range(9*60-1)] and
    print('')); # Even a broken code is quine twice a day.'''))

It should work with Python 3.8 onwards, which outputs something similar to this:

<details>
<summary>spoiler</summary>
<pre>
import re;exec(q:=re.sub(chr(27)+'...','','''import time;((
r:=&quot;import re;exec(q:=re.sub(chr(27)+'...','',%s%s%s))&quot; % (
ch<span style="color:white;background-color:black;">r</span><span style="color:white;background-color:black;">(</span><span style="color:white;background-color:black;">3</span><span style="color:white;background-color:black;">9</span><span style="color:white;background-color:black;">)</span><span style="color:white;background-color:black;">*</span>3<span style="color:white;background-color:black;">,</span><span style="color:white;background-color:black;">q</span><span style="color:white;background-color:black;">,</span><span style="color:white;background-color:black;">c</span><span style="color:white;background-color:black;">h</span><span style="color:white;background-color:black;">r</span>(39)*3))and <span style="color:white;background-color:black;">[</span><span style="color:white;background-color:black;">(</span>t<span style="color:white;background-color:black;">:</span><span style="color:white;background-color:black;">=</span><span style="color:white;background-color:black;">t</span><span style="color:white;background-color:black;">i</span><span style="color:white;background-color:black;">m</span><span style="color:white;background-color:black;">e</span>.strftim<span style="color:white;background-color:black;">e</span><span style="color:white;background-color:black;">(</span><span style="color:white;background-color:black;">'</span><span style="color:white;background-color:black;">%</span><span style="color:white;background-color:black;">I</span><span style="color:white;background-color:black;">:</span>%<span style="color:white;background-color:black;">M</span><span style="color:white;background-color:black;">:</span><span style="color:white;background-color:black;">%</span><span style="color:white;background-color:black;">S</span><span style="color:white;background-color:black;">'</span><span style="color:white;background-color:black;">)</span> )
an<span style="color:white;background-color:black;">d</span><span style="color:white;background-color:black;">(</span>(x<span style="color:white;background-color:black;">:</span><span style="color:white;background-color:black;">=</span>z<span style="color:white;background-color:black;">%</span><span style="color:white;background-color:black;">6</span>0)or 1)<span style="color:white;background-color:black;"> </span><span style="color:white;background-color:black;"> </span>and((y:<span style="color:white;background-color:black;">=</span><span style="color:white;background-color:black;">z</span>/<span style="color:white;background-color:black;">/</span><span style="color:white;background-color:black;">6</span>0)<span style="color:white;background-color:black;">o</span><span style="color:white;background-color:black;">r</span> 1)<span style="color:white;background-color:black;"> </span><span style="color:white;background-color:black;"> </span>and((c:<span style="color:white;background-color:black;">=</span><span style="color:white;background-color:black;">r</span>[<span style="color:white;background-color:black;">x</span><span style="color:white;background-color:black;">+</span>y*60])
or<span style="color:white;background-color:black;"> </span><span style="color:white;background-color:black;">1</span>)a<span style="color:white;background-color:black;">n</span><span style="color:white;background-color:black;">d</span> <span style="color:white;background-color:black;">p</span><span style="color:white;background-color:black;">r</span><span style="color:white;background-color:black;">i</span><span style="color:white;background-color:black;">n</span><span style="color:white;background-color:black;">t</span><span style="color:white;background-color:black;">(</span>f'{chr(27)}[<span style="color:white;background-color:black;">7</span><span style="color:white;background-color:black;">m</span>{<span style="color:white;background-color:black;">c</span><span style="color:white;background-color:black;">}</span><span style="color:white;background-color:black;">{</span><span style="color:white;background-color:black;">c</span><span style="color:white;background-color:black;">h</span><span style="color:white;background-color:black;">r</span>(27)}[0m<span style="color:white;background-color:black;">'</span><span style="color:white;background-color:black;"> </span><span style="color:white;background-color:black;">i</span><span style="color:white;background-color:black;">f</span><span style="color:white;background-color:black;">(</span><span style="color:white;background-color:black;">(</span>(<span style="color:white;background-color:black;"> </span><span style="color:white;background-color:black;">x</span><span style="color:white;background-color:black;">%</span><span style="color:white;background-color:black;">7</span><span style="color:white;background-color:black;">!</span><span style="color:white;background-color:black;">=</span>1)
an<span style="color:white;background-color:black;">d</span><span style="color:white;background-color:black;"> </span>0 <span style="color:white;background-color:black;">&lt;</span><span style="color:white;background-color:black;">x</span>&lt;57 a<span style="color:white;background-color:black;">n</span><span style="color:white;background-color:black;">d</span> y&gt;<span style="color:white;background-color:black;"> </span><span style="color:white;background-color:black;"> </span>1)and(i<span style="color:white;background-color:black;">n</span><span style="color:white;background-color:black;">t</span>(<span style="color:white;background-color:black;">(</span><span style="color:white;background-color:black;">'</span>OD<span style="color:white;background-color:black;">R</span><span style="color:white;background-color:black;">E</span>G4'<span style="color:white;background-color:black;"> </span><span style="color:white;background-color:black;"> </span>'MW<span style="color:white;background-color:black;">7</span><span style="color:white;background-color:black;">O</span>2VELP<span style="color:white;background-color:black;">O</span><span style="color:white;background-color:black;">2</span>7O<span style="color:white;background-color:black;">G</span><span style="color:white;background-color:black;">F</span>E'
'G<span style="color:white;background-color:black;">7</span><span style="color:white;background-color:black;">O</span><span style="color:white;background-color:black;">H</span><span style="color:white;background-color:black;">B</span><span style="color:white;background-color:black;">O</span><span style="color:white;background-color:black;">3</span>3<span style="color:white;background-color:black;">S</span><span style="color:white;background-color:black;">W</span><span style="color:white;background-color:black;">'</span><span style="color:white;background-color:black;">)</span><span style="color:white;background-color:black;">[</span><span style="color:white;background-color:black;">(</span>ord(t[(x-2)/<span style="color:white;background-color:black;">/</span><span style="color:white;background-color:black;">7</span>]<span style="color:white;background-color:black;">)</span><span style="color:white;background-color:black;">-</span><span style="color:white;background-color:black;">4</span><span style="color:white;background-color:black;">8</span><span style="color:white;background-color:black;">)</span><span style="color:white;background-color:black;">*</span>3:][:3],<span style="color:white;background-color:black;">3</span><span style="color:white;background-color:black;">6</span><span style="color:white;background-color:black;">)</span><span style="color:white;background-color:black;">&amp;</span><span style="color:white;background-color:black;">(</span><span style="color:white;background-color:black;">1</span>&lt;<span style="color:white;background-color:black;">&lt;</span><span style="color:white;background-color:black;">(</span><span style="color:white;background-color:black;">(</span><span style="color:white;background-color:black;">y</span><span style="color:white;background-color:black;">-</span><span style="color:white;background-color:black;">2</span>)*
3+((x-2)%7)//2))))else c,end='')for z in range(9*60-1)] and
print('')); # Even a broken code is quine twice a day.'''))
</pre>
